<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vocabulary Trainer</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: url(4a707f53-e034-4bd0-b77f-37654f3b0543.png) no-repeat;
        background-attachment: fixed;
        background-position: center;
        background-size: cover;
        color: #fff;
        display: flex;
        justify-content: center;
        padding: 20px;
    }

    @keyframes bgFlow {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    .container {
        width: 100%;
        max-width: 650px;
        background: transparent;
        padding: 25px;
        border: 3px solid white;
        border-radius: 12px;
        backdrop-filter: blur(10px);
        box-sizing: border-box;
    }

    button {
        width: 100%;
        padding: 12px;
        margin: 5px 0;
        border-radius: 8px;
        border: none;
        background: #303842;
        color: #fff;
        font-size: 16px;
        cursor: pointer;
        transition: 0.2s;
        box-sizing: border-box;
    }

    button:hover { background: #0f1114; transform: scale(1.02); }

    .word-box {
        font-size: 20px;
        text-align: center;
        margin: 20px 0;
        background: rgba(255,255,255,0.1);
        padding: 15px;
        border-radius: 8px;
        word-wrap: break-word;
    }

    .groups {
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
        margin-top: 20px;
    }

    .groupBtn {
        flex: 1 1 48%;
        padding: 12px;
        background: #444;
        border-radius: 10px;
        cursor: pointer;
        text-align: center;
        transition: 0.2s;
        box-sizing: border-box;
    }
    .groupBtn:hover { background: #3f4a70; transform: scale(1.02); }

    .lofi-toggle {
        width: auto;
        float: right;
        margin-bottom: 10px;
        background: #555555;
    }

    input[type="number"] {
        width: 100%;
        padding: 10px;
        margin: 10px 0;
        border-radius: 8px;
        border: none;
        font-size: 16px;
        box-sizing: border-box;
    }

    /* MEDIA QUERIES FOR SMALL SCREENS */
    @media (max-width: 500px) {
        .container { padding: 15px; }
        .word-box { font-size: 18px; padding: 10px; }
        button { font-size: 14px; padding: 10px; }
        .groupBtn { flex: 1 1 100%; }
    }
    .effect{
        position: absolute;
        top: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(120deg, transparent, #ffffff, transparent, #ffffff);
        opacity: 5%;
        background-size: 300% 300%;
        background-attachment: fixed;
        animation: bgFlow 12s ease infinite;;
        
    }
</style>

</head>
<body>
<div class="effect"></div>
<div class="container" id="app">
    <button class="lofi-toggle" onclick="toggleLofi()">üéµ Chill Mode</button>
    <h2>Vocabulary Trainer</h2>
    <button onclick="startSolo()">üë§ Solo Mode</button>
    <button onclick="startGroup()">üë• Group Mode</button>
</div>

<audio id="correctSnd" src="correct.mp3"></audio>
<audio id="wrongSnd" src="wrong.mp3"></audio>
<audio id="clickSnd" src="click.mp3"></audio>
<audio id="lofiMusic" src="lofi.mp3" loop></audio>

<script>
function sndClick(){ clickSnd.play(); }
function sndCorrect(){ correctSnd.play(); }
function sndWrong(){ wrongSnd.play(); }

let lofiPlaying = false;
function toggleLofi() {
    if (!lofiPlaying) {
        lofiMusic.play();
        lofiPlaying = true;
    } else {
        lofiMusic.pause();
        lofiPlaying = false;
    }
}

const vocabularies = [
"Wildlife conservation", "Nature reserve", "Announce", "Accountable", "Legitimate",
"Back up", "Attorney", "Thrilled", "Sensitive", "Anticipate", "Copper mine",
"Contaminated", "Suspect", "Praise", "Conversation", "Smile", "Important",
"Possible", "Common interest", "Distance", "Healthy", "Musical instrument",
"Mentality", "Conceal", "Converse", "Lift eyebrow", "Passenger", "Pretext",
"Gossip", "Go for a stroll", "Contemplate", "Blood", "Value", "In addition to",
"Extended family", "Disadvantage", "Attention", "Retired", "Live alone",
"Remain with family", "Save money", "On your side", "Forever", "Maintain",
"Expand", "Opportunities", "Remain", "Different", "Choose", "Convenience",
"Similar", "Opinion", "Spend", "Alone", "Physical state"
];

const uzbek = {
"Wildlife conservation":"Yovvoyi tabiatni muhofaza qilish",
"Nature reserve":"Tabiat qo‚Äòriqxonasi",
"Announce":"E'lon qilmoq",
"Accountable":"Javobgar",
"Legitimate":"Qonuniy, asosli",
"Back up":"Qo‚Äòllab-quvvatlamoq",
"Attorney":"Advokat, yurist",
"Thrilled":"Juda hayajonlangan",
"Sensitive":"Ta'sirchan, sezgir",
"Anticipate":"Oldindan kutmoq",
"Copper mine":"Mis koni",
"Contaminated":"Ifloslangan",
"Suspect":"Gumondor",
"Praise":"Maqtamoq",
"Conversation":"Suhbat",
"Smile":"Tabassum",
"Important":"Muhim",
"Possible":"Mumkin",
"Common interest":"Umumiy qiziqish",
"Distance":"Masofa",
"Healthy":"Sog‚Äòlom",
"Musical instrument":"Musiqa asbobi",
"Mentality":"Dunyoqarash",
"Conceal":"Yashirmoq",
"Converse":"Suhbatlashmoq",
"Lift eyebrow":"Qoshni ko‚Äòtarish",
"Passenger":"Yo‚Äòlovchi",
"Pretext":"Bahona",
"Gossip":"G‚Äòiybat",
"Go for a stroll":"Sayrga chiqmoq",
"Contemplate":"Mulohaza qilmoq",
"Blood":"Qon",
"Value":"Qadr",
"In addition to":"...dan tashqari",
"Extended family":"Kengaytirilgan oila",
"Disadvantage":"Kamchilik",
"Attention":"E‚Äôtibor",
"Retired":"Nafaqaga chiqqan",
"Live alone":"Yolg‚Äòiz yashamoq",
"Remain with family":"Oilasi bilan qolmoq",
"Save money":"Pul tejamoq",
"On your side":"Yonida",
"Forever":"Abadiy",
"Maintain":"Saqlamoq",
"Expand":"Kengaytirmoq",
"Opportunities":"Imkoniyatlar",
"Remain":"Qolmoq",
"Different":"Boshqacha",
"Choose":"Tanlamoq",
"Convenience":"Qulaylik",
"Similar":"O‚Äòxshash",
"Opinion":"Fikr",
"Spend":"Sarflamoq",
"Alone":"Yolg‚Äòiz",
"Physical state":"Jismoniy holat"
};

let index = 0, correct = 0, wrong = 0, timer, mode;

function backToMenu() { location.reload(); }

function startSolo() {
    sndClick();
    document.getElementById("app").innerHTML = `
    <button class="lofi-toggle" onclick="toggleLofi()">üéµ Chill Mode</button>
    <h2>Solo Mode</h2>
    <button onclick="soloStart('high')">üî• High Difficulty (Timer)</button>
    <button onclick="soloStart('low')">üå± Low Difficulty</button>
    <button onclick="backToMenu()">‚¨Ö Back</button>
    `;
}

function soloStart(difficulty) {
    sndClick();
    mode = difficulty;
    index = 0; correct = 0; wrong = 0;
    nextSoloWord();
}

function nextSoloWord() {
    if (index >= vocabularies.length) return soloEnd();
    if (timer) clearInterval(timer); // Clear previous timer

    const word = vocabularies[index];

    if (mode === 'high') {
        let correctAnswer = uzbek[word];
        let wrongAnswers = Object.values(uzbek).filter(v => v !== correctAnswer);
        wrongAnswers = wrongAnswers.sort(() => 0.5 - Math.random()).slice(0, 2);
        let choices = [correctAnswer, ...wrongAnswers].sort(() => 0.5 - Math.random());

        let timeLeft = 10;

        document.getElementById("app").innerHTML = `
            <button class="lofi-toggle" onclick="toggleLofi()">üéµ Chill Mode</button>
            <h2>Translate this:</h2>
            <div class="word-box">${word}</div>
            <div>‚è≥ Timer: <span id="time">${timeLeft}</span></div>
            <div id="choices"></div>
        `;

        const choicesDiv = document.getElementById("choices");
        choices.forEach((c, i) => {
            const btn = document.createElement("button");
            btn.innerText = `${String.fromCharCode(65+i)}. ${c}`;
            btn.addEventListener("click", () => checkChoice(c, correctAnswer));
            choicesDiv.appendChild(btn);
        });

        timer = setInterval(() => {
            timeLeft--;
            document.getElementById("time").innerText = timeLeft;
            if (timeLeft <= 0) {
                sndWrong();
                clearInterval(timer);
                wrong++;
                index++;
                nextSoloWord();
            }
        }, 1000);

    }
    if (mode === 'low') {
    let correctAnswer = uzbek[word];
    let wrongAnswers = Object.values(uzbek).filter(v => v !== correctAnswer);
    wrongAnswers = wrongAnswers.sort(() => 0.5 - Math.random()).slice(0, 2);
    let choices = [correctAnswer, ...wrongAnswers].sort(() => 0.5 - Math.random());

    document.getElementById("app").innerHTML = `
        <button class="lofi-toggle" onclick="toggleLofi()">üéµ Chill Mode</button>
        <h2>Translate this:</h2>
        <div class="word-box">${word}</div>
        <div id="choices"></div>
    `;

    const choicesDiv = document.getElementById("choices");
    choices.forEach((c, i) => {
        const btn = document.createElement("button");
        btn.innerText = `${String.fromCharCode(65+i)}. ${c}`;
        btn.addEventListener("click", () => checkChoiceLow(c, correctAnswer));
        choicesDiv.appendChild(btn);
    });
    }
    function checkChoiceLow(selected, correctAnswer) {
    sndClick();
    if (selected === correctAnswer) {
        sndCorrect();
        correct++;
    } else {
        sndWrong();
        wrong++;
    }
    index++;
    nextSoloWord();
}

}

function checkChoice(selected, correctAnswer) {
    sndClick();
    clearInterval(timer);
    if (selected === correctAnswer) {
        sndCorrect();
        correct++;
    } else {
        sndWrong();
        wrong++;
    }
    index++;
    nextSoloWord();
}

function checkSolo() {
    sndClick();
    if (mode === 'high') clearInterval(timer);
    let answer = document.getElementById("answer").value.trim();
    if (answer) { sndCorrect(); correct++; }
    else { sndWrong(); wrong++; }
    index++;
    nextSoloWord();
}

function soloEnd() {
    let total = vocabularies.length;
    let percent = Math.round((correct / total) * 100);
    let msg = "";

    if (percent === 100) msg = "üéâ PERFECT!";
    else if (percent >= 90) msg = "üí™ Great job!";
    else if (percent >= 60) msg = "üìù Good effort!";
    else if (percent === 0) msg = "üòÇ Bro... study?";
    else msg = "üìö Keep practicing!";

    document.getElementById("app").innerHTML = `
        <button class="lofi-toggle" onclick="toggleLofi()">üéµ Chill Mode</button>
        <h2>RESULT</h2>
        <p>Correct: ${correct}</p>
        <p>Wrong: ${wrong}</p>
        <h3>${msg}</h3>
        <button onclick="backToMenu()">Try Again</button>
    `;
}

// ================= GROUP MODE ===================
let groupScores = [];
let groupCount = 0;

function startGroup() {
    sndClick();
    index = 0;
    groupSetup();
}

function groupSetup() {
    document.getElementById("app").innerHTML = `
        <button class="lofi-toggle" onclick="toggleLofi()">üéµ Chill Mode</button>
        <h2>How many groups?</h2>
        <input id="groupCount" type="number" min="2" max="10" placeholder="2-10">
        <button onclick="createGroups()">Create groups</button>
        <button onclick="backToMenu()">‚¨Ö Back</button>
    `;
}

function createGroups() {
    sndClick();
    groupCount = parseInt(document.getElementById("groupCount").value);

    if (isNaN(groupCount) || groupCount < 2 || groupCount > 10) {
        alert("Enter a number from 2 to 10");
        return;
    }

    groupScores = new Array(groupCount).fill(0);
    index = 0;
    showGroupWord();
}

function showGroupWord() {
    if (index >= vocabularies.length) return showWinner();

    let word = vocabularies[index];
    let answer = uzbek[word];

    document.getElementById("app").innerHTML = `
        <button class="lofi-toggle" onclick="toggleLofi()">üéµ Chill Mode</button>
        <h2>Group Mode</h2>
        <div class="word-box">${word}</div>
        <button onclick="revealGroupAnswer('${answer}')">Show Answer</button>
        <button onclick="nextGroupWord()">Skip</button>
        <br><br>
        <h3>Who guessed it?</h3>
        <div class="groups">
            ${[...Array(groupCount)].map((_, i) => `
                <div class="groupBtn" onclick="score(${i})">Group ${i+1}</div>
            `).join("")}
        </div>
    `;
}

function revealGroupAnswer(answer) {
    sndClick();
    const box = document.querySelector(".word-box");
    if (!box.innerHTML.includes(answer)) {
        box.innerHTML += `<br><br><b>${answer}</b>`;
    }
}

function score(id) {
    sndCorrect();
    groupScores[id]++;
    nextGroupWord();
}

function nextGroupWord() {
    sndClick();
    index++;
    showGroupWord();
}

function showWinner() {
    sndClick();
    let maxScore = Math.max(...groupScores);
    let winners = groupScores
        .map((score, i) => score === maxScore ? `Group ${i+1}` : null)
        .filter(Boolean);

    document.getElementById("app").innerHTML = `
        <button class="lofi-toggle" onclick="toggleLofi()">üéµ Chill Mode</button>
        <h2>üèÜ WINNER</h2>
        <h3>${winners.join(", ")}</h3>
        <pre>
${groupScores.map((s,i)=>`Group ${i+1}: ${s}`).join("\n")}
        </pre>
        <button onclick="backToMenu()">Play Again</button>
    `;
}
</script>


</body>
</html>
